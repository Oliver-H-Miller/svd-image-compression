<!DOCTYPE html>

<h4>Uncompressed (left) vs. Compressed (right)</h4>
<img id="uncompressed" src="#placeholder" width="600px">
<img id="compressed" src="#placeholder" width="600px">

<h4> Number of singular values included: <span id="i-val"></span> </h4>


<script>

    const numbers = {{numbers_arr}};

const img = document.getElementById('compressed');
const i_val = document.getElementById('i-val');

// Set up control image (uncompressed)
const img_uncompressed = document.getElementById('uncompressed');
img_uncompressed.src = "images/uncompressed/grayscale_{{filename}}";

// On spacebar press, stop the animation
document.addEventListener('keydown', (e) => {
    if (e.code === 'Space') {
        flag_stop = !flag_stop;
    }
});

// Every 0.25 seconds, change the image to the next compressed image
let flag_stop = false;
let i = 0;
setInterval(() => {
    if (flag_stop) return;
    const filename = "{{filename}}";
    const imgPath = `images/compressed/${numbers[i]}_${filename}`;
    img.src = imgPath;
    i_val.innerText = numbers[i];
    i = (i + 1) % numbers.length;
}, 100);
</script>